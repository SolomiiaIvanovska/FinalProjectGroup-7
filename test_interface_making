import tkinter as tk
from Athlete_Class import Athlete
from Excercise_Class import Exercise
from Workout_Class import Workout

athlete = Athlete

screen = tk.Tk()
main_window = tk.Toplevel()
create_profile = tk.Toplevel()
difficulty_rating = tk.Toplevel()
difficulty_rating.withdraw()
main_window.withdraw()
create_profile.withdraw()


def rate_workout():
    difficulty_rating.geometry("450x225")
    difficulty_rating.configure(bg="Red")
    main_window.withdraw()
    screen.withdraw()
    create_profile.withdraw()
    welcome_message = tk.Label(difficulty_rating, text="Rate your last workout (Easy, Moderate, Hard): ", font=('Arial', 15))
    welcome_message.grid(row=0, column=0, columnspan=200,rowspan=50, pady=20, padx=10)

    input_rating = tk.Text(difficulty_rating, height=1, width=30, font=('Arial', 15))
    input_rating.grid(pady=20, padx=40)

    def add_difficulty():
        input_message = input_rating.get("1.0", tk.END)
        athlete.log_performance(input_message)
        open_main()


    create_button = tk.Button(difficulty_rating, height=1, width=30, text="Add Difficulty", font=('Arial', 15), command=add_difficulty)
    create_button.grid(pady=20, padx=40)

    difficulty_rating.deiconify()


def open_Creator():
    create_profile.geometry("375x550")
    create_profile.configure(bg="Aqua")
    main_window.withdraw()
    screen.withdraw()
    difficulty_rating.withdraw()
    welcome_message = tk.Label(create_profile, text="Please input the following information", font=('Arial', 15))
    welcome_message.grid(row=0, column=0, columnspan=200,rowspan=50, pady=20)



    name_message = tk.Label(create_profile, text="Name: ", font=('Arial', 18))
    name_message.grid(pady=10)

    name_input = tk.Text(create_profile, height=1, width=30, font=('Arial', 15))
    name_input.grid()

    sport_message = tk.Label(create_profile, text="Enter your sport: ", font=('Arial, 18'))
    sport_message.grid(pady=10)

    sport_input = tk.Text(create_profile, height=1, width=30, font=('Arial', 15))
    sport_input.grid()

    age_message = tk.Label(create_profile, text="Age: ", font=('Arial', 18))
    age_message.grid(pady=10)

    age_input = tk.Text(create_profile, height=1, width=30, font=('Arial', 15))
    age_input.grid()

    skill_message = tk.Label(create_profile, text="Enter skill level (Beginner/Intermediate/Advanced): ", font=('Arial', 12))
    skill_message.grid(pady=10)

    skill_input = tk.Text(create_profile, height=1, width=30, font=('Arial', 15))
    skill_input.grid()

    goals_message = tk.Label(create_profile, text="Goals (e.g., Upper Body): ", font=('Arial', 15))
    goals_message.grid(pady=10)

    goals_message = tk.Text(create_profile, height=1, width=30, font=('Arial', 15))
    goals_message.grid()

    def create_athelte():
        name_message = name_input.get("1.0", tk.END)
        sport_message = sport_input.get("1.0", tk.END)
        age_message = int(age_input.get("1.0", tk.END))
        skill_message = skill_input.get("1.0", tk.END)
        goal_message = goals_message.get("1.0", tk.END)
        try:
            athlete = Athlete((name_message, sport_message, age_message, skill_message, [], [], goal_message))
            open_main()
            print(athlete.get_all())
        except IndexError:
            print("Not all inputs were put in!")
        except ValueError:
            print("Entered Age is not an integer!")

    create_button = tk.Button(create_profile, height=1, width=30, text="Create Athlete!", font=('Arial', 15), command=create_athelte)
    create_button.grid(pady=10)


    create_profile.deiconify()


def open_main():
    name_message = input_message.get("1.0", tk.END)
    main_window.geometry("625x500")
    main_window.configure(bg='Blue')
    screen.withdraw()
    create_profile.withdraw()
    difficulty_rating.withdraw()
    welcome_message = tk.Label(main_window, text=f"{name_message} Please select an action!", font=('Arial', 25))
    welcome_message.grid(pady=20, padx=125)

    option_1 = tk.Button(main_window, height=1, width=30, text="Create an Athlete Profile", font=('Arial', 15), command=open_Creator)
    option_1.grid(pady=20, padx=125)

    option_2 = tk.Button(main_window, height=1, width=30, text="Add Predefined Workout", font=('Arial', 15))
    option_2.grid(pady=20, padx=125)

    option_3 = tk.Button(main_window, height=1, width=30, text="View Workout Summary", font=('Arial', 15))
    option_3.grid(pady=20, padx=125)

    option_4 = tk.Button(main_window, height=1, width=30, text="Rate a Workout", font=('Arial', 15), command=rate_workout)
    option_4.grid(pady=20, padx=125)

    option_5 = tk.Button(main_window, height=1, width=30, text="Exit program", font=('Arial', 15), command=main_window.destroy)
    option_5.grid(pady=20, padx=125)

    main_window.deiconify()

def get_input()->bool:
    name_message = input_message.get("1.0", tk.END)
    print(name_message)
    open_main()
   #open_main()
    welcome_screen = False
    return welcome_screen


#if(welcome_screen == True):

screen.geometry("800x500")
welcome_message = tk.Label(screen, text="Welcome to the Personalized Sports Training App", font = ('Arial', 25))
welcome_message.pack(padx = 20, pady = 20)
screen.configure(bg = '#CBC3E3')

name_message = tk.Label(screen, text="Input your name below", font = ('Arial', 18))
name_message.pack(padx = 0, pady=75)

input_message = tk.Text(screen, height= 1, width= 30, font = ('Arial', 15))
input_message.pack()

enter_button = tk.Button(screen, height=1, width=30, text="Enter App", font = ('Arial', 15), command=get_input)
enter_button.pack(padx = 0, pady = 65)

screen.mainloop()
